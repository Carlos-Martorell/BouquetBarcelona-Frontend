
<section>
   <header class="mb-6">
    <h1 class="text-3xl font-bold text-primary">Calendario de Pedidos</h1>
    <p class="text-text/70">Gestiona las entregas programadas</p>
  </header>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    
    <!-- CALENDARIO (ocupa 2 columnas en desktop) -->
    <div class="lg:col-span-2 bg-white border border-border rounded-lg p-4 shadow-sm">
      <full-calendar [options]="calendarOptions()" />
    </div>

    <!-- PANEL DE DETALLES -->
    <div class="bg-white border border-border rounded-lg p-4 shadow-sm">
      <h3 class="text-lg font-semibold text-primary mb-4">Detalles del Pedido</h3>
      
      @if (selectedEvent()) {
        <div class="space-y-4">
          <div>
            <p class="text-sm text-text/70">Cliente</p>
            <p class="font-semibold text-text">{{ selectedEvent().customerName }}</p>
          </div>
          
          <div>
            <p class="text-sm text-text/70">TelÃ©fono</p>
            <p class="font-semibold text-text">{{ selectedEvent().customerPhone }}</p>
          </div>
          
          <div>
            <p class="text-sm text-text/70">Hora de entrega</p>
            <p class="font-semibold text-text">
              {{ selectedEvent().start | date:'HH:mm' }} - {{ selectedEvent().end | date:'HH:mm' }}
            </p>
          </div>
          
          <div>
            <p class="text-sm text-text/70">DirecciÃ³n</p>
            <p class="font-semibold text-text text-sm">{{ selectedEvent().address }}</p>
          </div>
          
          <div>
            <p class="text-sm text-text/70">Total</p>
            <p class="font-semibold text-text text-xl">{{ selectedEvent().total }}â‚¬</p>
          </div>
          
          <div>
            <p class="text-sm text-text/70 mb-2">Estado</p>
            <span 
              class="inline-block px-3 py-1 rounded-full text-sm font-medium"
              [class]="getStatusBadgeClasses(selectedEvent().status)">
              {{ getStatusLabel(selectedEvent().status) }}
            </span>
          </div>

          <!-- BOTONES DE ACCIÃ“N -->
          <div class="pt-4 border-t border-border space-y-2">
            @if (selectedEvent().status === 'pending') {
              <button 
                (click)="updateOrderStatus(selectedEvent().id, 'confirmed')"
                class="w-full bg-success text-white py-2 rounded-lg hover:bg-success/90 transition-all">
                âœ“ Confirmar Pedido
              </button>
            }
            @if (selectedEvent().status === 'confirmed') {
              <button 
                (click)="updateOrderStatus(selectedEvent().id, 'delivered')"
                class="w-full bg-primary text-white py-2 rounded-lg hover:bg-primary/90 transition-all">
                ðŸ“¦ Marcar como Entregado
              </button>
            }
            <button 
              (click)="closeEventDetails()"
              class="w-full border-2 border-border py-2 rounded-lg hover:bg-background transition-all">
              Cerrar
            </button>
          </div>
        </div>
      } @else {
        <div class="text-center py-12">
          <p class="text-6xl mb-4">ðŸ“…</p>
          <p class="text-text/50">
            Haz clic en un evento del calendario para ver los detalles
          </p>
        </div>
      }
    </div>
  </div>
</section>